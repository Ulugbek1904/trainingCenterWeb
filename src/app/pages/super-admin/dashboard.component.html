<div *ngIf="isLoading" class="text-center mt-10">Yuklanmoqda...</div>

<div *ngIf="!isLoading && stats" class="p-6">
  <h2 class="text-2xl font-bold mb-4">Statistika</h2>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="bg-blue-100 p-4 rounded shadow">O'quv markazlar: {{ stats.totalTenants }}</div>
    <div class="bg-green-100 p-4 rounded shadow">Talabalar: {{ stats.totalStudents }}</div>
    <div class="bg-yellow-100 p-4 rounded shadow">Ustozlar: {{ stats.totalTeachers }}</div>
    <div class="bg-purple-100 p-4 rounded shadow">Faol kurslar: {{ stats.totalActiveCourses }}</div>
    <div class="bg-indigo-100 p-4 rounded shadow">To‘lovlar: {{ stats.totalPayments | number:'1.0-0' }} so‘m</div>
    <div class="bg-pink-100 p-4 rounded shadow">Oxirgi 7 kun to‘lovlari: {{ stats.last7DaysPayments | number:'1.0-0' }} so‘m</div>
    <div class="bg-orange-100 p-4 rounded shadow">So‘nggi 7 kunda qo‘shilgan talabalar: {{ stats.last7DaysNewStudents }}</div>
  </div>

  <h3 class="text-xl mt-6 mb-2 font-semibold">Top 5 faol tenantlar:</h3>
  <table class="min-w-full bg-white border">
    <thead>
      <tr class="bg-gray-200">
        <th class="p-2 text-left">Nomi</th>
        <th class="p-2 text-left">Talabalar soni</th>
        <th class="p-2 text-left">To‘lovlar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let tenant of stats.topTenants">
        <td class="p-2">{{ tenant.tenantName }}</td>
        <td class="p-2">{{ tenant.studentCount }}</td>
        <td class="p-2">{{ tenant.totalPayments | number:'1.0-0' }}</td>
      </tr>
    </tbody>
  </table>
</div>
